<html>
<head>
  <title>
  Clickwise Generator
  </title>
  <script src="clickwise.js" type="text/javascript"></script>
  <script src="clocktalk.js" type="text/javascript"></script>
  <link rel="stylesheet" type="text/css" href="clickwise.css"></link>
</head>
  <body onload="setupDebug();setupDictionaries('dictionary_list')">
    <script type="text/javascript">
      function render(event)
      {
        var src_str = document.getElementById("source_string").value;
        var dictionary_key = "";

        var radios = document.getElementsByName('dictionary');
        for (var i = 0, length = radios.length; i < length; i++) {
          if (radios[i].checked) {
              dictionary_key = radios[i].value;
              // only one radio can be logically checked, don't check the rest
              break;
          }
        }
        imgURL = drawStringWithDictionary(src_str, dictionary_key);
        document.getElementById("clickwise-result").src = imgURL;
        if (!(typeof event === "undefined"))
        {
          event.preventDefault();
        }
        return false;
      }
      function setupDictionaries(id)
      {
        var checked = true;
        for (var key in dictionaries)
        {
          var radioHtml = '<input type="radio" name="dictionary" value="' + key + '"';
          if ( checked ) {
              radioHtml += ' checked="checked"';
              checked = false;
          }
          radioHtml += '/><span class="dictionary_text">' + key + '</span>';

          var radioFragment = document.createElement('div');
          radioFragment.innerHTML = radioHtml;
          radioFragment.className = "dictionary_entry";
          document.getElementById(id).appendChild(radioFragment);
        }
      }
      
      function getURLParameter(sParam)
      {
        var sPageURL = window.location.search.substring(1);
        var sURLVariables = sPageURL.split('&');
        for (var i = 0; i < sURLVariables.length; i++) 
        {
            var sParameterName = sURLVariables[i].split('=');
            if (sParameterName[0] == sParam) 
            {
                return sParameterName[1];
            }
        }
        return null;
      }
      
      function setupDebug()
      {
        var debug_setting = getURLParameter('debug');
        if(debug_setting === "true")
        {
          var div = document.createElement('div');
          div.innerHTML = "<canvas id='debug_canvas'></canvas>";
          document.getElementById("results_section").appendChild(div);
          debug = true;
        }
      }
    </script>
    <div class="container">
      <div class="result" id="results_section">
        <img id="clickwise-result" src="" alt="No result"></img>
      </div>
      <div class="input_area">
        <form onsubmit="render(event)">
          <div class="field">
            <span class="spacer"></span>
            Select Clickwise dialect:
          </div>
          <div class="field">
            <span class="spacer"></span>
            <div class="dictionary_select" id="dictionary_list">
            </div>
          </div>
          <div class="field">
            <span class="spacer"></span>
            Enter your text:
          </div>
          <div class="field">
            <input type="text" id="source_string" name="source_string" size=20></input>
            <input type="button" onclick="render();" value="Translate!"></input>
          </div>
        </form>
      </div>
    </div>
  </body>
</html>